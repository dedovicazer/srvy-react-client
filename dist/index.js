"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e);!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&o.firstChild?o.insertBefore(a,o.firstChild):o.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".modal{display:block;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000;background-color:rgba(0,0,0,.4)}.modal-content{background-color:#fefefe;margin:15% auto;padding:20px;border:1px solid #888;width:80%}.close{color:#aaa;float:right;font-size:28px;font-weight:700}.close:focus,.close:hover{color:#000;text-decoration:none;cursor:pointer}.questionContainer{padding-top:16px}.questionItem{margin-bottom:16px}");const o=1,a=({values:e,question:t,onChange:o})=>{const a=t.questionId;return n.default.createElement("div",{className:"questionItem"},n.default.createElement("p",null,t.questionText),n.default.createElement("textarea",{name:a,value:e[a],onChange:o}))},l=({values:e,question:t,onChange:o})=>{const a=t.questionId,l=t.options;return n.default.createElement("div",{className:"questionItem"},n.default.createElement("p",null,t.questionText),n.default.createElement("select",{name:a,value:e[a],onChange:o},l.map((e=>n.default.createElement("option",{value:e.value},e.key)))))},s=({questions:t,onSubmit:s})=>{const[u,i]=e.useState(null);e.useEffect((()=>{const e=t.map((e=>({[e.questionId]:""}))).reduce(((e,t)=>Object.assign(e,t)),{});i(e)}),[]);const r=e=>{const{name:t,value:n}=e.target;i((e=>({...e,[t]:n})))};return n.default.createElement("div",null,n.default.createElement("form",null,u&&t.map((e=>n.default.createElement("div",{className:"questionContainer"},e.type===o?n.default.createElement(a,{values:u,question:e,onChange:r}):n.default.createElement(l,{values:u,question:e,onChange:r})))),n.default.createElement("button",{onClick:()=>s(u)},"Submit")))};exports.Survey=({configuration:t})=>{const{surveyId:a,questions:l}=t,[u,i]=e.useState(!0),r=()=>{i(!1)};return n.default.createElement("div",{id:"container"},u&&a&&l&&n.default.createElement("div",{id:"myModal",className:"modal"},n.default.createElement("div",{className:"modal-content"},n.default.createElement("span",{onClick:r,className:"close"},"Ã—"),n.default.createElement("h4",null,"Simple Survey"),n.default.createElement(s,{questions:l,onSubmit:e=>{const t=(e=>l.map((t=>{if(t.type===o)return{questionId:t.questionId,type:t.type,answer:e[t.questionId]};const n=t.options.find((n=>n.value===e[t.questionId]));return{questionId:t.questionId,type:t.type,selectedOption:n}})))(e);(e=>{const t={result:e};let n={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)};fetch(`http://localhost:3001/api/v1/surveys/${a}/results/`,n).then((()=>{console.log("Success")})).catch((e=>Promise.reject(e)))})(t),r()}}))))};
